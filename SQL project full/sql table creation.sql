DROP TABLE user_role;
DROP TABLE role;
DROP TABLE request;
DROP TABLE request_status;
DROP TABLE activity;
DROP TABLE vehicle;
DROP TABLE vehicle_subcategory;
DROP TABLE vehicle_category;
DROP TABLE booking;
DROP TABLE location;
DROP TABLE fuel_type;
DROP TABLE city;
DROP TABLE users;

CREATE TABLE users (
    user_id	    CHAR(5)	PRIMARY KEY,
    first_name	VARCHAR2(50) NOT NULL,	
    last_name	VARCHAR2(50),		
    password	VARCHAR2(50)	NOT NULL CHECK (LENGTH(password)> 5),
    email	VARCHAR2(50)	NOT NULL UNIQUE,
    mobile_no	CHAR(10)	NOT NULL UNIQUE,
    wallet_money NUMBER(10,2) DEFAULT 10000.00	
);

CREATE TABLE role(
     role_id	CHAR(5)	PRIMARY KEY	,
	 role_name	VARCHAR2(50) NOT NULL UNIQUE
);

CREATE TABLE user_role (
    user_id	CHAR(5),
	role_id	CHAR(5),
	CONSTRAINT pk_user_role
	PRIMARY KEY (user_id,role_id),
	CONSTRAINT fk_user
	FOREIGN KEY (user_id) REFERENCES users(user_id),
	CONSTRAINT fk_role
	FOREIGN KEY (role_id) REFERENCES role(role_id)
);		

CREATE TABLE fuel_type (
    fuel_type_id CHAR(5) PRIMARY KEY,
	fuel_type VARCHAR2(50) NOT NULL UNIQUE
);				
	
				
CREATE TABLE city (
    city_id	CHAR(5)	PRIMARY KEY,
	city_name VARCHAR2(50) NOT NULL	
);			

CREATE TABLE location(
    location_id	CHAR(5)	PRIMARY KEY,
	location_name VARCHAR2(50) NOT NULL,
	address	VARCHAR2(100) NOT NULL,
	city_id	CHAR(5)	NOT NULL,
	pincode	CHAR(6)	NOT NULL,
	CONSTRAINT fk_city
	FOREIGN KEY (city_id) REFERENCES city(city_id)
);

CREATE TABLE vehicle_category (
	vehicle_category_id	CHAR(5)	PRIMARY KEY,	
	vehicle_category_name VARCHAR2(50) NOT NULL UNIQUE
);

CREATE TABLE vehicle_subcategory (
	vehicle_subcategory_id	CHAR(5)	PRIMARY KEY,
	vehicle_subcategory_name VARCHAR2(50) NOT NULL UNIQUE,
	price_per_hour	NUMBER(10,2) NOT NULL,	
	vehicle_category_id	CHAR(5)	NOT NULL,	
	CONSTRAINT fk_vehicle_category
	FOREIGN KEY (vehicle_category_id) REFERENCES vehicle_category(vehicle_category_id)
);

CREATE TABLE vehicle(
	vehicle_id	CHAR(5)	PRIMARY KEY,
	vehicle_model	VARCHAR2(50) NOT NULL,	
	user_id	CHAR(5)	NOT NULL,	
	vehicle_number	CHAR(10) NOT NULL,	
	vehicle_subcategory_id	CHAR(5),	
	color	VARCHAR2(50) NOT NULL,	
	location_id	CHAR(5)	NOT NULL,	
	fuel_type_id CHAR (5)	NOT NULL,	
	vehicle_image_url VARCHAR2(500)	NOT NULL,
	CONSTRAINT fk_vehicle_owner
	FOREIGN KEY (user_id) REFERENCES users(user_id),
	CONSTRAINT fk_vehicle_subcategory
	FOREIGN KEY (vehicle_subcategory_id) REFERENCES vehicle_subcategory(vehicle_subcategory_id),
	CONSTRAINT fk_location
	FOREIGN KEY (location_id) REFERENCES location(location_id),
	CONSTRAINT fk_fuel_type
	FOREIGN KEY (fuel_type_id) REFERENCES fuel_type(fuel_type_id)
);

CREATE TABLE booking (
	booking_id	CHAR(5)	PRIMARY KEY,	
	pickup_date	DATE	NOT NULL,	
	dropoff_date	DATE	NOT NULL,	
	booking_date	DATE	NOT NULL,	
	amount	NUMBER(10,2)	NOT NULL,	
	location_id	CHAR(5)	NOT NULL,	
	vehicle_id	CHAR(5)	NOT NULL,	
	user_id	CHAR(5)	NOT NULL,	
	CONSTRAINT fk_booking_user
	FOREIGN KEY (user_id) REFERENCES users(user_id),
	CONSTRAINT fk_booking_location
	FOREIGN KEY (location_id) REFERENCES location(location_id),
	CONSTRAINT fk_booked_vehicle
	FOREIGN KEY (vehicle_id) REFERENCES vehicle(vehicle_id)
);

CREATE TABLE activity (
    activity_id	CHAR(5)	PRIMARY KEY,
	activity_type VARCHAR2(50) NOT NULL UNIQUE
);		
	
				
CREATE TABLE request_status	(
	request_status_id CHAR(5) PRIMARY KEY,	
	request_status_name	VARCHAR2(50) NOT NULL UNIQUE	
);

CREATE TABLE request (
    request_id	CHAR(5)	PRIMARY KEY,	
	activity_id	CHAR(5)	NOT NULL,	
	user_comments	VARCHAR2(500),		
	admin_comments	VARCHAR2(500),		
	request_status_id	CHAR(5)	NOT NULL,	
	vehicle_id	CHAR(5)	NOT NULL,
	user_id	CHAR(5)	NOT NULL,
	CONSTRAINT fk_request_status
	FOREIGN KEY (request_status_id) REFERENCES request_status(request_status_id),	
	CONSTRAINT fk_activity_id
	FOREIGN KEY (activity_id) REFERENCES activity(activity_id),		
	CONSTRAINT fk_customer_request
	FOREIGN KEY (user_id) REFERENCES users(user_id),
    CONSTRAINT fk_vehicle_request
	FOREIGN KEY (vehicle_id) REFERENCES vehicle(vehicle_id)
);			
	
--Data Insertion
INSERT INTO  USERS (USER_ID,FIRST_NAME,LAST_NAME,PASSWORD,EMAIL,MOBILE_NO,WALLET_MONEY) VALUES ('U0001','Ifrah','Malik','If#123','ifrah@g',940081718,10000);
INSERT INTO  USERS (USER_ID,FIRST_NAME,LAST_NAME,PASSWORD,EMAIL,MOBILE_NO,WALLET_MONEY) VALUES ('U0002','Akash','Sinha','AK#123','Akash@g',940081717,10000);
INSERT INTO  USERS (USER_ID,FIRST_NAME,LAST_NAME,PASSWORD,EMAIL,MOBILE_NO,WALLET_MONEY) VALUES ('U0003','Ishwar','ABC','ISH#123','ISHW@g',940081700,10000);
INSERT INTO  USERS (USER_ID,FIRST_NAME,LAST_NAME,PASSWORD,EMAIL,MOBILE_NO,WALLET_MONEY) VALUES ('U0009','Srishti','Gupta','Stish#123','Srish@g',940081730,10000);
INSERT INTO  USERS (USER_ID,FIRST_NAME,LAST_NAME,PASSWORD,EMAIL,MOBILE_NO,WALLET_MONEY) VALUES ('U0004','satheesh','kumar','Sa#1235','saths@g',9090909090,10000);
INSERT INTO  USERS (USER_ID,FIRST_NAME,LAST_NAME,PASSWORD,EMAIL,MOBILE_NO,WALLET_MONEY) VALUES ('U0005','satheesh','kumar','Sa#123','satheesh@g',9090909191,10000);
INSERT INTO  USERS (USER_ID,FIRST_NAME,LAST_NAME,PASSWORD,EMAIL,MOBILE_NO,WALLET_MONEY) VALUES ('U0006','satheesh','kumar','Sa#123','sath@g',9090909292,10000);
INSERT INTO  USERS (USER_ID,FIRST_NAME,LAST_NAME,PASSWORD,EMAIL,MOBILE_NO,WALLET_MONEY) VALUES ('U0007','satheesh','kumar','Sa#123','sathi@g',9090909393,10000);
INSERT INTO  USERS (USER_ID,FIRST_NAME,LAST_NAME,PASSWORD,EMAIL,MOBILE_NO,WALLET_MONEY) VALUES ('U0008','satheesh','kumar','Sa#123','sathz@g',9090909494,10000);
SELECT * FROM users;

INSERT INTO  ROLE (ROLE_ID,ROLE_NAME) VALUES ('RL001','Admin');
INSERT INTO  ROLE (ROLE_ID,ROLE_NAME) VALUES ('RL002','User');
SELECT * FROM role;

INSERT INTO  USER_ROLE (ROLE_ID,USER_ID) VALUES ('RL001','U0001');
INSERT INTO  USER_ROLE (ROLE_ID,USER_ID) VALUES ('RL002','U0002');
INSERT INTO  USER_ROLE (ROLE_ID,USER_ID) VALUES ('RL002','U0003');
INSERT INTO  USER_ROLE (ROLE_ID,USER_ID) VALUES ('RL002','U0004');
INSERT INTO  USER_ROLE (ROLE_ID,USER_ID) VALUES ('RL002','U0005');
INSERT INTO  USER_ROLE (ROLE_ID,USER_ID) VALUES ('RL002','U0006');
SELECT * FROM user_role;

INSERT INTO  CITY (CITY_ID,CITY_NAME) VALUES ('C0001','Mumbai');
INSERT INTO  CITY (CITY_ID,CITY_NAME) VALUES ('C0002','Chennai');
SELECT * FROM city;

INSERT INTO  LOCATION (LOCATION_ID,LOCATION_NAME,ADDRESS,CITY_ID,PINCODE) VALUES ('L0001','Worli','Dr E Moses Rd, Worli Naka, Upper Worli','C0001','400018');
INSERT INTO  LOCATION (LOCATION_ID,LOCATION_NAME,ADDRESS,CITY_ID,PINCODE) VALUES ('L0002','Chembur','shop no 1, v n purav marg','C0001','400071');
INSERT INTO  LOCATION (LOCATION_ID,LOCATION_NAME,ADDRESS,CITY_ID,PINCODE) VALUES ('L0003','Airoli','Railway station','C0001','400708');
INSERT INTO  LOCATION (LOCATION_ID,LOCATION_NAME,ADDRESS,CITY_ID,PINCODE) VALUES ('L0004','Ghatkopar','Railway station','C0001','400709');
SELECT * FROM location;

INSERT INTO  fuel_type (fuel_type_ID,fuel_type) VALUES ('F0001','PETROL');
INSERT INTO  fuel_type (fuel_type_ID,fuel_type) VALUES ('F0002','DIESEL');
INSERT INTO  fuel_type (fuel_type_ID,fuel_type) VALUES ('F0003','ELECTRIC');
SELECT * FROM fuel_type;

INSERT INTO  VEHICLE_CATEGORY (VEHICLE_CATEGORY_ID,VEHICLE_CATEGORY_NAME) VALUES ('VC001','CAR');
INSERT INTO  VEHICLE_CATEGORY (VEHICLE_CATEGORY_ID,VEHICLE_CATEGORY_NAME) VALUES ('VC021','BIKE');
SELECT * FROM vehicle_category;
INSERT INTO  VEHICLE_SUBCATEGORY (VEHICLE_SUBCATEGORY_ID,VEHICLE_SUBCATEGORY_NAME, PRICE_PER_HOUR,VEHICLE_CATEGORY_ID) 
VALUES ('VS001','SUV',250,'VC001');
INSERT INTO  VEHICLE_SUBCATEGORY (VEHICLE_SUBCATEGORY_ID, VEHICLE_SUBCATEGORY_NAME, PRICE_PER_HOUR,VEHICLE_CATEGORY_ID) 
VALUES ('VS002','SEDAN',100,'VC001');
INSERT INTO  VEHICLE_SUBCATEGORY (VEHICLE_SUBCATEGORY_ID, VEHICLE_SUBCATEGORY_NAME, PRICE_PER_HOUR,VEHICLE_CATEGORY_ID) 
VALUES ('VS003','HATCHBACK',250,'VC001');
INSERT INTO  VEHICLE_SUBCATEGORY (VEHICLE_SUBCATEGORY_ID, VEHICLE_SUBCATEGORY_NAME, PRICE_PER_HOUR,VEHICLE_CATEGORY_ID)
VALUES ('VS004','CRUISER',200,'VC021');
INSERT INTO  VEHICLE_SUBCATEGORY (VEHICLE_SUBCATEGORY_ID, VEHICLE_SUBCATEGORY_NAME, PRICE_PER_HOUR,VEHICLE_CATEGORY_ID) 
VALUES ('VS005','DIRT BIKE',150,'VC021');
INSERT INTO  VEHICLE_SUBCATEGORY (VEHICLE_SUBCATEGORY_ID, VEHICLE_SUBCATEGORY_NAME, PRICE_PER_HOUR,VEHICLE_CATEGORY_ID) 
VALUES ('VS006','SPORTS BIKE',150,'VC021');
SELECT * FROM vehicle_subcategory;

INSERT INTO  VEHICLE (VEHICLE_ID,VEHICLE_MODEL,VEHICLE_NUMBER, VEHICLE_SUBCATEGORY_ID,COLOR,fuel_type_ID,LOCATION_ID, VEHICLE_IMAGE_URL,USER_ID) 
VALUES ('V0001','Hyundai Creta','M150001','VS001','White','F0001','L0001','https://images.carandbike.com/car-images/large/hyundai/creta/hyundai-creta.webp?v=56','U0004');
INSERT INTO  VEHICLE (VEHICLE_ID,VEHICLE_MODEL,VEHICLE_NUMBER, VEHICLE_SUBCATEGORY_ID,COLOR,fuel_type_ID,LOCATION_ID, VEHICLE_IMAGE_URL, USER_ID) 
VALUES ('V0002','BMW','M150011','VS002','Blue','F0001','L0002','https://imgd.aeplcdn.com/600x337/cw/ec/33136/BMW-M5-Exterior-172905.jpg?wm=0s=85','U0003');
INSERT INTO  VEHICLE (VEHICLE_ID,VEHICLE_MODEL,VEHICLE_NUMBER, VEHICLE_SUBCATEGORY_ID,COLOR,fuel_type_ID,LOCATION_ID,VEHICLE_IMAGE_URL, USER_ID) 
VALUES ('V0003','Honda','M140011','VS004','Black','F0002','L0001','https://media.zigcdn.com/media/content/2020/Mar/195925_2020_honda_rebel.jpg','U0002');
INSERT INTO  VEHICLE (VEHICLE_ID,VEHICLE_MODEL,VEHICLE_NUMBER, VEHICLE_SUBCATEGORY_ID,COLOR,fuel_type_ID,LOCATION_ID, VEHICLE_IMAGE_URL,USER_ID) 
VALUES ('V0004','Maruti Swift','M150071','VS001','White','F0001','L0001','https://images.carandbike.com/car-images/large/hyundai/creta/hyundai-creta.webp?v=56','U0004');



SELECT * FROM vehicle;

INSERT INTO  BOOKING (BOOKING_ID,USER_ID,VEHICLE_ID,PICKUP_DATE,DROPOFF_DATE,BOOKING_DATE,LOCATION_ID,AMOUNT) 
VALUES ('B0001','U0002','V0001',TO_DATE('29-05-20','DD-MM-RR'),TO_DATE('29-05-20','DD-MM-RR'),TO_DATE('25-05-20','DD-MM-RR'),'L0001',3000.00);
INSERT INTO  BOOKING (BOOKING_ID,USER_ID,VEHICLE_ID,PICKUP_DATE,DROPOFF_DATE,BOOKING_DATE,LOCATION_ID,AMOUNT) 
VALUES ('B0002','U0003','V0002',TO_DATE('15-06-20','DD-MM-RR'),TO_DATE('16-06-20','DD-MM-RR'),TO_DATE('25-05-20','DD-MM-RR'),'L0002',6000.00);
INSERT INTO  BOOKING (BOOKING_ID,USER_ID,VEHICLE_ID,PICKUP_DATE,DROPOFF_DATE,BOOKING_DATE,LOCATION_ID,AMOUNT) 
VALUES ('B0003','U0004','V0003',TO_DATE('15-06-20','DD-MM-RR'),TO_DATE('16-06-20','DD-MM-RR'),TO_DATE('25-05-20','DD-MM-RR'),'L0001',6000.00);
INSERT INTO  BOOKING (BOOKING_ID,USER_ID,VEHICLE_ID,PICKUP_DATE,DROPOFF_DATE,BOOKING_DATE,LOCATION_ID,AMOUNT) 
VALUES ('B0004','U0005','V0002',TO_DATE('17-06-20','DD-MM-RR'),TO_DATE('18-06-20','DD-MM-RR'),TO_DATE('25-05-20','DD-MM-RR'),'L0002',7000.00);
SELECT * FROM booking;

INSERT INTO  REQUEST_STATUS (REQUEST_STATUS_ID,REQUEST_STATUS_NAME) VALUES ('RE001','PENDING');
INSERT INTO  REQUEST_STATUS (REQUEST_STATUS_ID,REQUEST_STATUS_NAME) VALUES ('RE002','APPROVED');
INSERT INTO  REQUEST_STATUS (REQUEST_STATUS_ID,REQUEST_STATUS_NAME) VALUES ('RE003','REJECTED');
SELECT * FROM request_status;

INSERT INTO  ACTIVITY (ACTIVITY_ID,ACTIVITY_TYPE) VALUES ('A0001','VEHICLE_REGISTER');
INSERT INTO  ACTIVITY (ACTIVITY_ID,ACTIVITY_TYPE) VALUES ('A0002','CAR_OPT_IN');
INSERT INTO  ACTIVITY (ACTIVITY_ID,ACTIVITY_TYPE) VALUES ('A0003','CAR_OPT_OUT');

SELECT * FROM activity;

INSERT INTO  request (REQUEST_ID,USER_ID,ACTIVITY_ID,USER_COMMENTS,ADMIN_COMMENTS,VEHICLE_ID,REQUEST_STATUS_ID) 
VALUES ('R0001','U0002','A0001','Registration Needs Approval', 'Approve Vehicle','V0001','RE002');
INSERT INTO  request (REQUEST_ID,USER_ID,ACTIVITY_ID,USER_COMMENTS,ADMIN_COMMENTS,VEHICLE_ID,REQUEST_STATUS_ID) 
VALUES ('R0002','U0003','A0002','Registration Needs Approval', 'Reject Vehicle','V0001','RE003');
INSERT INTO  request (REQUEST_ID,USER_ID,ACTIVITY_ID,USER_COMMENTS,ADMIN_COMMENTS,VEHICLE_ID,REQUEST_STATUS_ID) 
VALUES ('R0003','U0002','A0001','Registration Needs Approval', 'Approve Vehicle','V0001','RE002');
INSERT INTO  request (REQUEST_ID,USER_ID,ACTIVITY_ID,USER_COMMENTS,ADMIN_COMMENTS,VEHICLE_ID,REQUEST_STATUS_ID) 
VALUES ('R0004','U0003','A0002','Registration Needs Approval', 'Reject Vehicle','V0001','RE003');
INSERT INTO  request (REQUEST_ID,USER_ID,ACTIVITY_ID,USER_COMMENTS,ADMIN_COMMENTS,VEHICLE_ID,REQUEST_STATUS_ID) 
VALUES ('R0005','U0002','A0001','Registration Needs Approval', 'Approve Vehicle','V0001','RE002');
INSERT INTO  request (REQUEST_ID,USER_ID,ACTIVITY_ID,USER_COMMENTS,ADMIN_COMMENTS,VEHICLE_ID,REQUEST_STATUS_ID) 
VALUES ('R0006','U0003','A0002','Registration Needs Approval', 'Reject Vehicle','V0001','RE003');

SELECT * FROM request;

SELECT * FROM role;

select * from usertype;


create table vehicle_subcategory (subcat_id number(10,0) not null,
cost_per_hour NUMBER(10,2) not null,
vehicle_type_name varchar2(255 char) not null,
vechileCategory_vehicle_category_id number(10,0), 
primary key (subcat_id))
